#timeline-loading Loading...

%table#timeline{:style => 'display: none;'}
  %thead.ui-widget-header
    %tr
      %td.date Date
      %td.name Description
      %td.amount Amount
  %tbody.ui-widget-content

= content_for :sidebar do
  #overview
  #event-detail-view{:style => "display: none;"}

= content_for :head do
  = render "layouts/mixpanel"

= content_for :javascript do

  %script{:src => google_js_src, :type => 'text/javascript'}

  :javascript
    require({ baseUrl: "/javascripts/compiled" }, ["order!vendor/underscore", "order!vendor/backbone", "order!app/controllers/members/timeline_controller", "order!app/controllers/members/available_services_controller", "order!app/models/event_list", "order!app/models/member"], function(underscore, backbone, MemberTimelineController, AvailableServicesController, EventList, Member) {

      Backbone.emulateHTTP = true;

      window.member = new Member(#{@account.member.to_json});

      eventList = new EventList();
      eventList.url = "/accounts/#{@account.id}/events";

      var timelineController = new MemberTimelineController({
        fetchOnInit: true,
        events: eventList
      });

      var availableServicesController = new AvailableServicesController();

    });
